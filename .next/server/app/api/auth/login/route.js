"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},852:e=>{e.exports=require("async_hooks")},4300:e=>{e.exports=require("buffer")},2081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},3292:e=>{e.exports=require("fs/promises")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},7561:e=>{e.exports=require("node:fs")},3977:e=>{e.exports=require("node:fs/promises")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},3819:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>v,patchFetch:()=>T,requestAsyncStorage:()=>f,routeModule:()=>g,serverHooks:()=>A,staticGenerationAsyncStorage:()=>q,staticGenerationBailout:()=>k});var s={};r.r(s),r.d(s,{POST:()=>x});var o=r(5419),i=r(9108),n=r(9678),a=r(8070),u=r(8064),p=r(988),l=r(1530),c=r(4637),d=r(8191);class h extends l.m.classBuilder().ep(c.q).m(function(e,t,r,s){return[(0,p.a)(r,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityProviderService","InitiateAuth",{}).n("CognitoIdentityProviderClient","InitiateAuthCommand").sc(d.AqB).build(){}var m=r(2965);async function x(e){try{let t=await e.json(),r=String(t.email||"").trim(),s=String(t.password||""),o=process.env.COGNITO_REGION,i=process.env.COGNITO_CLIENT_ID;if(!o||!i)return a.Z.json({error:"Cognito is not configured"},{status:500});let n=new u.c({region:o}),p=(await n.send(new h({AuthFlow:"USER_PASSWORD_AUTH",ClientId:i,AuthParameters:{USERNAME:r,PASSWORD:s}}))).AuthenticationResult,l=p?.AccessToken||"",c=p?.IdToken||"",d=p?.RefreshToken||"";if(!l||!c)return a.Z.json({error:"Login failed"},{status:401});let x=await n.send(new m.T({AccessToken:l})),g=Object.fromEntries((x.UserAttributes||[]).map(e=>[String(e.Name),String(e.Value)])),f={id:g.sub||"",name:g.name||g.email||"",email:g.email||""},q=a.Z.json({user:f});return q.cookies.set("accessToken",l,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}),q.cookies.set("idToken",c,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}),d&&q.cookies.set("refreshToken",d,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}),q}catch(t){let e=t?.message||"Login failed";return a.Z.json({error:e},{status:401})}}let g=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"D:\\TRAE AI\\five9 dashboard - 3 Sep 2025\\manual steup\\manual steup\\frontend\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:q,serverHooks:A,headerHooks:S,staticGenerationBailout:k}=g,v="/api/auth/login/route";function T(){return(0,n.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:q})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,899],()=>r(3819));module.exports=s})();