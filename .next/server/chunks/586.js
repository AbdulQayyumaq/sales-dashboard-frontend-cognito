"use strict";exports.id=586,exports.ids=[586],exports.modules={7586:(e,r,n)=>{n.r(r),n.d(r,{fromTokenFile:()=>d,fromWebToken:()=>l});var t=n(7529),i=n(558),o=n(7293),s=n(7147);let l=e=>async r=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:t,roleSessionName:i,webIdentityToken:o,providerId:s,policyArns:l,policy:a,durationSeconds:d}=e,{roleAssumerWithWebIdentity:c}=e;if(!c){let{getDefaultRoleAssumerWithWebIdentity:t}=await n.e(471).then(n.bind(n,7471));c=t({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...r?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return c({RoleArn:t,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:l,Policy:a,DurationSeconds:d})},a="AWS_WEB_IDENTITY_TOKEN_FILE",d=(e={})=>async r=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let n=e?.webIdentityTokenFile??process.env[a],d=e?.roleArn??process.env.AWS_ROLE_ARN,c=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!n||!d)throw new i.m("Web identity configuration not specified",{logger:e.logger});let g=await l({...e,webIdentityToken:o.f?.getTokenRecord?.()[n]??(0,s.readFileSync)(n,{encoding:"ascii"}),roleArn:d,roleSessionName:c})(r);return n===process.env[a]&&(0,t.P)(g,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),g}},7293:(e,r,n)=>{n.d(r,{f:()=>o});var t=n(4903),i=n(8479);let o={getFileRecord:()=>i.c_,interceptFile(e,r){i.c_[e]=Promise.resolve(r)},getTokenRecord:()=>t.l,interceptToken(e,r){t.l[e]=r}}},9554:(e,r,n)=>{n.d(r,{P:()=>s});var t=n(6113),i=n(1017),o=n(6789);let s=e=>{let r=(0,t.createHash)("sha1").update(e).digest("hex");return(0,i.join)((0,o.O)(),".aws","sso","cache",`${r}.json`)}},4903:(e,r,n)=>{n.d(r,{g:()=>s,l:()=>o});var t=n(3292),i=n(9554);let o={},s=async e=>{if(o[e])return o[e];let r=(0,i.P)(e);return JSON.parse(await (0,t.readFile)(r,"utf8"))}}};