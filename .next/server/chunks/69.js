"use strict";exports.id=69,exports.ids=[69],exports.modules={2069:(e,n,t)=>{t.d(n,{fromIni:()=>S});var r=t(3733),i=t(697),o=t(558),s=t(7529),a=t(4150);let l=(e,n,r)=>{let i={EcsContainer:async e=>{let{fromHttp:n}=await t.e(126).then(t.bind(t,4126)),{fromContainerMetadata:i}=await t.e(301).then(t.bind(t,7301));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,a.t)(n(e??{}),i(e))().then(d)},Ec2InstanceMetadata:async e=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:n}=await t.e(301).then(t.bind(t,7301));return async()=>n(e)().then(d)},Environment:async e=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:n}=await t.e(878).then(t.bind(t,2878));return async()=>n(e)().then(d)}};if(e in i)return i[e];throw new o.m(`Unsupported credential source in profile ${n}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},d=e=>(0,s.P)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),c=(e,{profile:n="default",logger:t}={})=>!!e&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(_(e,{profile:n,logger:t})||f(e,{profile:n,logger:t})),_=(e,{profile:n,logger:t})=>{let r="string"==typeof e.source_profile&&void 0===e.credential_source;return r&&t?.debug?.(`    ${n} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),r},f=(e,{profile:n,logger:t})=>{let r="string"==typeof e.credential_source&&void 0===e.source_profile;return r&&t?.debug?.(`    ${n} isCredentialSourceProfile credential_source=${e.credential_source}`),r},g=async(e,n,r,a={},d)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let c=n[e],{source_profile:_,region:f}=c;if(!r.roleAssumer){let{getDefaultRoleAssumer:e}=await t.e(471).then(t.bind(t,7471));r.roleAssumer=e({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:f??r?.parentClientConfig?.region}},r.clientPlugins)}if(_&&_ in a)throw new o.m(`Detected a cycle attempting to resolve credentials for profile ${(0,i.Jl)(r)}. Profiles visited: `+Object.keys(a).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${_?`source_profile=[${_}]`:`profile=[${e}]`}`);let g=_?d(_,n,r,{...a,[_]:!0},u(n[_]??{})):(await l(c.credential_source,e,r.logger)(r))();if(u(c))return g.then(e=>(0,s.P)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let n={RoleArn:c.role_arn,RoleSessionName:c.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:c.external_id,DurationSeconds:parseInt(c.duration_seconds||"3600",10)},{mfa_serial:t}=c;if(t){if(!r.mfaCodeProvider)throw new o.m(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});n.SerialNumber=t,n.TokenCode=await r.mfaCodeProvider(t)}let i=await g;return r.roleAssumer(i,n).then(e=>(0,s.P)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},u=e=>!e.role_arn&&!!e.credential_source,p=e=>!!e&&"object"==typeof e&&"string"==typeof e.credential_process,y=async(e,n)=>t.e(298).then(t.bind(t,4214)).then(({fromProcess:t})=>t({...e,profile:n})().then(e=>(0,s.P)(e,"CREDENTIALS_PROFILE_PROCESS","v"))),w=async(e,n,r={})=>{let{fromSSO:i}=await t.e(624).then(t.bind(t,3624));return i({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(e=>n.sso_session?(0,s.P)(e,"CREDENTIALS_PROFILE_SSO","r"):(0,s.P)(e,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},E=e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name),C=e=>!!e&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,b=async(e,n)=>{n?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let t={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,s.P)(t,"CREDENTIALS_PROFILE","n")},I=e=>!!e&&"object"==typeof e&&"string"==typeof e.web_identity_token_file&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,m=async(e,n)=>t.e(586).then(t.bind(t,7586)).then(({fromTokenFile:t})=>t({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:n.roleAssumerWithWebIdentity,logger:n.logger,parentClientConfig:n.parentClientConfig})().then(e=>(0,s.P)(e,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),P=async(e,n,t,r={},i=!1)=>{let s=n[e];if(Object.keys(r).length>0&&C(s))return b(s,t);if(i||c(s,{profile:e,logger:t.logger}))return g(e,n,t,r,P);if(C(s))return b(s,t);if(I(s))return m(s,t);if(p(s))return y(t,e);if(E(s))return await w(e,s,t);throw new o.m(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:t.logger})},S=(e={})=>async({callerClientConfig:n}={})=>{let t={...e,parentClientConfig:{...n,...e.parentClientConfig}};t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let o=await (0,r.M)(t);return P((0,i.Jl)({profile:e.profile??n?.profile}),o,t)}},3733:(e,n,t)=>{t.d(n,{M:()=>o});var r=t(6201);let i=(...e)=>{let n={};for(let t of e)for(let[e,r]of Object.entries(t))void 0!==n[e]?Object.assign(n[e],r):n[e]=r;return n},o=async e=>{let n=await (0,r.Z)(e);return i(n.configFile,n.credentialsFile)}}};