"use strict";exports.id=298,exports.ids=[298],exports.modules={4214:(e,r,t)=>{t.r(r),t.d(r,{fromProcess:()=>f});var o=t(3733),i=t(697),s=t(558),c=t(7293),n=t(2081),a=t(3837),l=t(7529);let d=(e,r,t)=>{if(1!==r.Version)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(void 0===r.AccessKeyId||void 0===r.SecretAccessKey)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(r.Expiration){let t=new Date;if(new Date(r.Expiration)<t)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let o=r.AccountId;!o&&t?.[e]?.aws_account_id&&(o=t[e].aws_account_id);let i={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,...r.SessionToken&&{sessionToken:r.SessionToken},...r.Expiration&&{expiration:new Date(r.Expiration)},...r.CredentialScope&&{credentialScope:r.CredentialScope},...o&&{accountId:o}};return(0,l.P)(i,"CREDENTIALS_PROCESS","w"),i},p=async(e,r,t)=>{let o=r[e];if(r[e]){let i=o.credential_process;if(void 0!==i){let o=(0,a.promisify)(c.f?.getTokenRecord?.().exec??n.exec);try{let t;let{stdout:s}=await o(i);try{t=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return d(e,t,r)}catch(e){throw new s.m(e.message,{logger:t})}}else throw new s.m(`Profile ${e} did not contain credential_process.`,{logger:t})}else throw new s.m(`Profile ${e} could not be found in shared credentials file.`,{logger:t})},f=(e={})=>async({callerClientConfig:r}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let t=await (0,o.M)(e);return p((0,i.Jl)({profile:e.profile??r?.profile}),t,e.logger)}},7293:(e,r,t)=>{t.d(r,{f:()=>s});var o=t(4903),i=t(8479);let s={getFileRecord:()=>i.c_,interceptFile(e,r){i.c_[e]=Promise.resolve(r)},getTokenRecord:()=>o.l,interceptToken(e,r){o.l[e]=r}}},9554:(e,r,t)=>{t.d(r,{P:()=>c});var o=t(6113),i=t(1017),s=t(6789);let c=e=>{let r=(0,o.createHash)("sha1").update(e).digest("hex");return(0,i.join)((0,s.O)(),".aws","sso","cache",`${r}.json`)}},4903:(e,r,t)=>{t.d(r,{g:()=>c,l:()=>s});var o=t(3292),i=t(9554);let s={},c=async e=>{if(s[e])return s[e];let r=(0,i.P)(e);return JSON.parse(await (0,o.readFile)(r,"utf8"))}}};