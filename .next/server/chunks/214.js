"use strict";exports.id=214,exports.ids=[214,298],exports.modules={4214:(e,r,t)=>{t.r(r),t.d(r,{fromProcess:()=>p});var i=t(3733),o=t(697),s=t(558),c=t(7293),n=t(2081),a=t(3837),l=t(7529);let d=(e,r,t)=>{if(1!==r.Version)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(void 0===r.AccessKeyId||void 0===r.SecretAccessKey)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(r.Expiration){let t=new Date;if(new Date(r.Expiration)<t)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let i=r.AccountId;!i&&t?.[e]?.aws_account_id&&(i=t[e].aws_account_id);let o={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,...r.SessionToken&&{sessionToken:r.SessionToken},...r.Expiration&&{expiration:new Date(r.Expiration)},...r.CredentialScope&&{credentialScope:r.CredentialScope},...i&&{accountId:i}};return(0,l.P)(o,"CREDENTIALS_PROCESS","w"),o},f=async(e,r,t)=>{let i=r[e];if(r[e]){let o=i.credential_process;if(void 0!==o){let i=(0,a.promisify)(c.f?.getTokenRecord?.().exec??n.exec);try{let t;let{stdout:s}=await i(o);try{t=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return d(e,t,r)}catch(e){throw new s.m(e.message,{logger:t})}}else throw new s.m(`Profile ${e} did not contain credential_process.`,{logger:t})}else throw new s.m(`Profile ${e} could not be found in shared credentials file.`,{logger:t})},p=(e={})=>async({callerClientConfig:r}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let t=await (0,i.M)(e);return f((0,o.Jl)({profile:e.profile??r?.profile}),t,e.logger)}},7293:(e,r,t)=>{t.d(r,{f:()=>s});var i=t(4903),o=t(8479);let s={getFileRecord:()=>o.c_,interceptFile(e,r){o.c_[e]=Promise.resolve(r)},getTokenRecord:()=>i.l,interceptToken(e,r){i.l[e]=r}}},9554:(e,r,t)=>{t.d(r,{P:()=>c});var i=t(6113),o=t(1017),s=t(6789);let c=e=>{let r=(0,i.createHash)("sha1").update(e).digest("hex");return(0,o.join)((0,s.O)(),".aws","sso","cache",`${r}.json`)}},4903:(e,r,t)=>{t.d(r,{g:()=>c,l:()=>s});var i=t(3292),o=t(9554);let s={},c=async e=>{if(s[e])return s[e];let r=(0,o.P)(e);return JSON.parse(await (0,i.readFile)(r,"utf8"))}},3733:(e,r,t)=>{t.d(r,{M:()=>s});var i=t(6201);let o=(...e)=>{let r={};for(let t of e)for(let[e,i]of Object.entries(t))void 0!==r[e]?Object.assign(r[e],i):r[e]=i;return r},s=async e=>{let r=await (0,i.Z)(e);return o(r.configFile,r.credentialsFile)}}};