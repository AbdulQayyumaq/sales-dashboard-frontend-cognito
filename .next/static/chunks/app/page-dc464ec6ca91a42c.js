(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1296:function(){},2904:function(e,s,t){Promise.resolve().then(t.bind(t,9790))},3515:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthContext:function(){return o},AuthProvider:function(){return m},useAuth:function(){return x}});var a=t(7437),r=t(2265),n=t(4327);let c="https://salesgames-dashboard.auth.us-east-1.amazoncognito.com",l="62ua8j7k3svfqka13bv9f7kakm";function i(e){try{let s=e.split(".");if(3!==s.length)return null;let t=s[1],a=atob(t.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch(e){return null}}async function d(e){let s=new TextEncoder().encode(e),t=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(t),r="";return a.forEach(e=>{r+=String.fromCharCode(e)}),btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}let o=(0,r.createContext)(void 0);function x(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function m(e){let{children:s}=e,[t,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(!0),[u,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{h(!0);try{let e=window.localStorage.getItem("access_token")||"",s=window.localStorage.getItem("id_token")||"";if(!e&&!s){x(null);return}let t=s?i(s):i(e);if(t){let e={id:String(t.sub||t.username||""),name:String(t.name||t.email||""),email:String(t.email||"")};x(e);let s=Number(t.exp||0);if(s){let e=Math.floor(Date.now()/1e3);setTimeout(()=>j(),Math.max((s-e-60)*1e3,5e3))}}else x(null)}finally{h(!1)}},j=async()=>{let e=window.localStorage.getItem("refresh_token")||"";if(!e)return;let s=c.replace(/\/$/,""),t=new URLSearchParams({grant_type:"refresh_token",client_id:l,refresh_token:e}),a=await fetch("".concat(s,"/oauth2/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(a.ok){let e=await a.json(),s=e.access_token||"",t=e.id_token||"";s&&window.localStorage.setItem("access_token",s),t&&window.localStorage.setItem("id_token",t),v()}},p=async()=>{g(null);let e=c.replace(/\/$/,""),s=function(){let e=new Uint8Array(32);crypto.getRandomValues(e);let s="";return e.forEach(e=>{s+=("0"+e.toString(16)).slice(-2)}),s}(),t=await d(s);{window.localStorage.setItem("pkce_verifier",s);let a="".concat(e,"/oauth2/authorize?client_id=").concat(encodeURIComponent(l),"&redirect_uri=").concat(encodeURIComponent("http://localhost:3000/callback"),"&response_type=code&scope=").concat(encodeURIComponent("openid email profile"),"&code_challenge_method=S256&code_challenge=").concat(t);window.location.assign(a)}},f=async()=>{h(!0);{window.localStorage.removeItem("access_token"),window.localStorage.removeItem("id_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("pkce_verifier"),x(null);let e=c.replace(/\/$/,""),s="".concat(e,"/logout?client_id=").concat(encodeURIComponent(l),"&logout_uri=").concat(encodeURIComponent("http://localhost:3000"));window.location.assign(s)}h(!1)};return(0,a.jsx)(o.Provider,{value:{user:t,login:p,loginWithCredentials:async(e,s)=>{h(!0),g(null);try{let t=new n.AM({UserPoolId:"us-east-1_Ekr0Fg6xJ",ClientId:l}),a=new n.ws({Username:e,Pool:t}),r=new n.sD({Username:e,Password:s});await new Promise((e,s)=>{a.authenticateUser(r,{onSuccess:s=>{var t;let a=s.getAccessToken().getJwtToken(),r=s.getIdToken().getJwtToken(),n=(null===(t=s.getRefreshToken())||void 0===t?void 0:t.getToken())||"";a&&window.localStorage.setItem("access_token",a),r&&window.localStorage.setItem("id_token",r),n&&window.localStorage.setItem("refresh_token",n),e()},onFailure:e=>s(e),newPasswordRequired:()=>s(Error("New password required"))})}),await v()}catch(e){throw g((null==e?void 0:e.message)||"Login failed"),e}finally{h(!1)}},logout:f,isLoading:m,error:u},children:s})}},2888:function(e,s,t){"use strict";t.d(s,{a:function(){return n}});var a=t(2265),r=t(3515);function n(){let e=(0,a.useContext)(r.AuthContext);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9790:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var a=t(7437),r=t(2265),n=t(2888),c=t(4033);function l(e){let{children:s}=e,{user:t,isLoading:l}=(0,n.a)(),i=(0,c.useRouter)();return((0,r.useEffect)(()=>{l||t||i.push("/login")},[t,l,i]),l)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-50 to-primary-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full animate-pulse"})}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):t?(0,a.jsx)(a.Fragment,{children:s}):null}var i=t(4301),d=t(8957),o=t(6141),x=t(4280),m=t(3021),h=t(2369),u=t(5883);function g(e){let{selectedSite:s,onSiteChange:t,lastUpdated:c,isRefreshing:l,onRefresh:g}=e,{logout:v,user:j}=(0,n.a)(),[p,f]=(0,r.useState)(!1),b=String((null==j?void 0:j.name)||"A").split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase();return(0,a.jsxs)("header",{className:"bg-white shadow-lg border-b border-secondary-200",children:[(0,a.jsx)("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-secondary-900",children:"Sales Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-secondary-600",children:"Real-time Performance Tracking"})]})]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-success-50 rounded-lg border border-success-200",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm font-medium text-success-700",children:"LIVE"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-secondary-600",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{suppressHydrationWarning:!0,children:["Updated ",(0,i.Z)(c,"HH:mm:ss")]})]}),(0,a.jsxs)("button",{onClick:g,disabled:l,className:"flex items-center space-x-2 px-3 py-2 bg-primary-50 hover:bg-primary-100 text-primary-700 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed border border-primary-200",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 ".concat(l?"animate-spin":"")}),(0,a.jsx)("span",{className:"hidden sm:inline font-medium",children:l?"Refreshing...":"Refresh"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>f(!p),className:"relative p-2 text-secondary-600 hover:text-secondary-900 hover:bg-secondary-100 rounded-lg transition-colors duration-200",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-danger-500 rounded-full"})]}),p&&(0,a.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-secondary-200 z-50",children:[(0,a.jsx)("div",{className:"p-4 border-b border-secondary-200",children:(0,a.jsx)("h3",{className:"font-semibold text-secondary-900",children:"Notifications"})}),(0,a.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-4 hover:bg-secondary-50 border-b border-secondary-100",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-success-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-4 w-4 text-success-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-secondary-900",children:"Sarah Johnson moved to #1!"}),(0,a.jsx)("p",{className:"text-xs text-secondary-600 mt-1",children:"2 minutes ago"})]})]})}),(0,a.jsx)("div",{className:"p-4 hover:bg-secondary-50 border-b border-secondary-100",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-primary-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-secondary-900",children:"New daily record set!"}),(0,a.jsx)("p",{className:"text-xs text-secondary-600 mt-1",children:"5 minutes ago"})]})]})}),(0,a.jsx)("div",{className:"p-4 text-center",children:(0,a.jsx)("button",{className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"View all notifications"})})]})]})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-white/80 hover:bg-white backdrop-blur-sm rounded-xl border border-secondary-200/50 hover:border-secondary-300/70 shadow-sm hover:shadow-md transition-all duration-300 ease-out cursor-default min-w-0",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-primary-600  flex items-center justify-center ring-2 ring-white shadow-sm transition-transform duration-300",children:(0,a.jsx)("span",{className:"text-white text-[11px] font-bold",children:b})}),(0,a.jsxs)("span",{className:"absolute -bottom-0.5 -right-0.5 flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-success-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-success-500 ring-2 ring-white"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-secondary-900 truncate",children:(null==j?void 0:j.name)||"Agent"}),(0,a.jsx)("div",{className:"flex items-center gap-1 mt-0.5",children:(0,a.jsx)("span",{className:"text-[10px] font-medium text-success-600",children:"Online"})})]})]}),(0,a.jsxs)("button",{onClick:v,className:"group flex items-center gap-2 px-4 py-2.5 bg-danger-50 hover:bg-danger-100  text-danger-700 hover:text-danger-800  rounded-xl border border-danger-200 hover:border-danger-300 shadow-sm hover:shadow-md  transition-all duration-300 ease-out hover:-translate-y-0.5 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-danger-500/40",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 transition-transform duration-300  group-hover:scale-110 group-hover:rotate-12"}),(0,a.jsx)("span",{className:"hidden sm:inline font-semibold text-sm",children:"Logout"})]})]})]})}),p&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>{f(!1)}})]})}var v=t(9163),j=t(2505),p=t(5790),f=t(4522),b=t(9224),y=t(3523);function N(e){let{rank:s,size:t="md"}=e;return(0,a.jsx)("div",{className:"".concat({sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base"}[t]," rounded-full flex items-center justify-center font-bold ").concat(1===s?"bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rank-badge-gold":2===s?"bg-gradient-to-br from-gray-300 to-gray-500 text-white rank-badge-silver":3===s?"bg-gradient-to-br from-amber-600 to-amber-800 text-white rank-badge-bronze":s<=5?"bg-gradient-to-br from-primary-500 to-primary-600 text-white":s<=10?"bg-gradient-to-br from-secondary-400 to-secondary-600 text-white":"bg-secondary-200 text-secondary-700"),children:s<=3?1===s?(0,a.jsx)(d.Z,{className:"h-4 w-4"}):2===s?(0,a.jsx)(v.Z,{className:"h-4 w-4"}):3===s?(0,a.jsx)(j.Z,{className:"h-4 w-4"}):null:s})}function w(e){let{rankDelta:s,movement:t}=e;if(!s||0===s)return null;let r=s>0,n=s<0;return(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs font-medium ".concat(r?"text-success-600":n?"text-danger-600":"text-secondary-500"),children:[r&&(0,a.jsx)(p.Z,{className:"h-3 w-3"}),n&&(0,a.jsx)(f.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[r?"+":"",s]})]})}function _(e){let{agents:s,loading:t,error:n,highlightedAgentId:c,onAgentSelect:l,updatedAt:i,isRefreshing:m}=e,[h,u]=(0,r.useState)("rank"),[g,v]=(0,r.useState)("asc"),j=e=>{h===e?v("asc"===g?"desc":"asc"):(u(e),v("asc"))},p=[...s].sort((e,s)=>{let t=e[h],a=s[h];if("number"==typeof t&&"number"==typeof a)return"asc"===g?t-a:a-t;let r=String(t||"").toLowerCase(),n=String(a||"").toLowerCase();return"asc"===g?r.localeCompare(n):n.localeCompare(r)}),f=e=>{let{field:s}=e;return h!==s?(0,a.jsx)(b.Z,{className:"h-4 w-4 text-secondary-400"}):"asc"===g?(0,a.jsx)(b.Z,{className:"h-4 w-4 text-secondary-600"}):(0,a.jsx)(y.Z,{className:"h-4 w-4 text-secondary-600"})};return t?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 bg-white border-b border-secondary-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Live Leaderboard"}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:[s.length," Agents"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-secondary-600",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{suppressHydrationWarning:!0,className:"text-xs px-2 py-1 rounded bg-blue-100 text-secondary-700",children:["Updated ",i?new Date(i).toLocaleTimeString():new Date().toLocaleTimeString()]}),(0,a.jsx)(x.Z,{className:"h-4 w-4 ".concat(m?"text-orange-600 animate-spin":"text-orange-500")})]})]}),(0,a.jsx)("div",{className:"space-y-4 p-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-secondary-200 rounded-full"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-secondary-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-secondary-200 rounded w-32"}),(0,a.jsx)("div",{className:"h-3 bg-secondary-200 rounded w-24"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-secondary-200 rounded w-16"}),(0,a.jsx)("div",{className:"h-3 bg-secondary-200 rounded w-12"})]})]})},s))})]}):n?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-danger-600 mb-2",children:"Failed to load leaderboard"}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:n.message})]}):s.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 bg-white border-b border-secondary-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Live Leaderboard"}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:[s.length," Agents"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-secondary-600",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{suppressHydrationWarning:!0,className:"text-xs px-2 py-1 rounded bg-blue-100 text-secondary-700",children:["Updated ",i?new Date(i).toLocaleTimeString():new Date().toLocaleTimeString()]}),(0,a.jsx)(x.Z,{className:"h-4 w-4 ".concat(m?"text-orange-600 animate-spin":"text-orange-500")})]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-secondary-50 to-secondary-100 border-b-2 border-secondary-300 px-6 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center text-sm font-semibold text-secondary-700 uppercase tracking-wide",children:[(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsxs)("button",{onClick:()=>j("rank"),className:"flex items-center space-x-1 hover:text-secondary-900 transition-colors duration-200",children:[(0,a.jsx)("span",{children:"Rank"}),(0,a.jsx)(f,{field:"rank"})]})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("button",{onClick:()=>j("name"),className:"flex items-center space-x-1 hover:text-secondary-900 transition-colors duration-200",children:[(0,a.jsx)("span",{children:"Agent"}),(0,a.jsx)(f,{field:"name"})]})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)("button",{onClick:()=>j("sales"),className:"flex items-center space-x-1 hover:text-secondary-900 transition-colors duration-200",children:[(0,a.jsx)("span",{children:"Sales"}),(0,a.jsx)(f,{field:"sales"})]})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("span",{children:"Weekly Bonus"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("span",{children:"Monthly Bonus"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)("button",{onClick:()=>j("satisfaction"),className:"flex items-center space-x-1 hover:text-secondary-900 transition-colors duration-200",children:[(0,a.jsx)("span",{children:"Rating"}),(0,a.jsx)(f,{field:"satisfaction"})]})})]})}),(0,a.jsx)("div",{className:"divide-y divide-secondary-200",children:p.map((e,s)=>{var t,r,n;let i=e.agent_id===c,d=e.rank<=3;return(0,a.jsxs)("div",{onClick:()=>null==l?void 0:l(e.agent_id),className:"leaderboard-row grid grid-cols-12 gap-4 items-center p-6 transition-all duration-200 ".concat(i?"bg-primary-50 border-l-4 border-primary-500":"hover:bg-secondary-50"," ").concat(d?"bg-gradient-to-r from-yellow-50 to-transparent":""," ").concat(l?"cursor-pointer":""),children:[(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(N,{rank:e.rank})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.avatar_url||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name),"&background=ed7420&color=fff"),alt:e.name,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-secondary-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:e.site||"phoenix"})]})]})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("div",{className:"font-semibold text-secondary-900",children:e.sales}),(0,a.jsxs)("div",{className:"text-sm text-secondary-600",children:["$",(null===(t=e.revenue)||void 0===t?void 0:t.toFixed(0))||0," revenue"]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("div",{className:"font-semibold text-green-600",children:["$",e.weekly_bonus||0]}),(0,a.jsxs)("div",{className:"text-sm text-secondary-600",children:[e.weekly_sales||0," sales"]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)("div",{className:"font-semibold text-blue-600",children:["$",e.monthly_bonus||0]}),(0,a.jsxs)("div",{className:"text-sm text-secondary-600",children:[(null===(r=e.monthly_daily_avg)||void 0===r?void 0:r.toFixed(1))||"0.0"," avg/day"]})]}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-secondary-900",children:(null===(n=e.satisfaction)||void 0===n?void 0:n.toFixed(1))||"0.0"}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"customer rating"})]}),(0,a.jsx)(w,{rankDelta:e.delta||0,movement:e.movement})]})})]},e.agent_id)})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 bg-white border-b border-secondary-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Live Leaderboard"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:"0 Agents"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-secondary-600",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{suppressHydrationWarning:!0,className:"text-xs px-2 py-1 rounded bg-blue-100 text-secondary-700",children:["Updated ",i?new Date(i).toLocaleTimeString():new Date().toLocaleTimeString()]}),(0,a.jsx)(x.Z,{className:"h-4 w-4 ".concat(m?"text-orange-600 animate-spin":"text-orange-500")})]})]}),(0,a.jsx)("div",{className:"text-center py-8 text-secondary-600",children:"No agents found"})]})}var k=t(1981);let S="https://bgwvyurbv4.execute-api.us-east-1.amazonaws.com/prod";class C extends Error{constructor(e,s,t){super(e),this.code=s,this.details=t,this.name="ApiError"}}function A(e){let{agent:s}=e,t="up"===s.trend_direction;return(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-orange-600 font-semibold text-sm",children:s.agent_name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:s.agent_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 truncate",children:s.agent_id.includes("@")?s.agent_id.split("@")[0]:s.agent_id})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap flex-shrink-0 ml-2 ".concat(t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[t?(0,a.jsx)(p.Z,{className:"w-3 h-3"}):(0,a.jsx)(f.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[s.score_change_percent>0?"+":"",Math.abs(s.score_change_percent)>=100?s.score_change_percent.toFixed(0):s.score_change_percent.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Current Score"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:s.current_score.toFixed(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Score Change"}),(0,a.jsxs)("p",{className:"font-semibold ".concat(t?"text-green-600":"text-red-600"),children:[s.score_change>0?"+":"",s.score_change.toFixed(1)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Previous Score"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:s.previous_score.toFixed(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Sales Change"}),(0,a.jsxs)("p",{className:"font-semibold ".concat(s.sales_change>=0?"text-green-600":"text-red-600"),children:[s.sales_change>0?"+":"",s.sales_change]})]})]})]})}function D(){let{data:e,loading:s,error:t}=function(e,s){let[t,a]=(0,r.useState)(null),[n,c]=(0,r.useState)(!1),[l,i]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{if(!e){console.log("⚠️ useApi: No endpoint provided");return}let s=Date.now();c(!0),i(null);try{let t=e.startsWith("/api/")?e:"".concat(S).concat(e.startsWith("/")?e:"/".concat(e));console.log("\uD83D\uDD04 API Request Started:",{endpoint:e,url:t,timestamp:new Date().toISOString(),apiBaseUrl:S});let r=window.localStorage.getItem("access_token")||"",n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}},mode:e.startsWith("/api/")?"same-origin":"cors"}),c=Date.now()-s;if(console.log("\uD83D\uDCE1 API Response Received:",{endpoint:e,status:n.status,statusText:n.statusText,duration:"".concat(c,"ms"),headers:Object.fromEntries(n.headers.entries())}),!n.ok){let s=await n.json().catch(()=>({}));throw console.error("❌ API Error Response:",{endpoint:e,status:n.status,statusText:n.statusText,errorData:s}),new C(s.message||"HTTP ".concat(n.status,": ").concat(n.statusText),n.status.toString(),s)}let l=await n.json();console.log("✅ API Success:",{endpoint:e,dataType:typeof l,dataKeys:l&&"object"==typeof l?Object.keys(l):"N/A",dataLength:Array.isArray(l)?l.length:"N/A",duration:"".concat(c,"ms"),result:l});let i=function(e,s){if(!s||"object"!=typeof s)return s;switch(e){case"/leaderboard":if(s.agents&&Array.isArray(s.agents))return{...s,leaders:s.agents.map(e=>({...e,weekly_sales:e.sales||0}))};break;case"/districts":if(s.districts&&Array.isArray(s.districts))return{...s,districts:s.districts}}return s}(e,l);console.log("\uD83D\uDD04 Transformed Data:",{endpoint:e,originalKeys:Object.keys(l),transformedKeys:i&&"object"==typeof i?Object.keys(i):"N/A",transformedData:i}),void 0!==i.data?(console.log("\uD83D\uDCE6 Setting data from transformedData.data:",i.data),a(i.data)):(console.log("\uD83D\uDCE6 Setting data directly from transformedData:",i),a(i))}catch(a){let t=Date.now()-s;console.error("❌ API Error for ".concat(e,":"),{error:a,duration:"".concat(t,"ms"),errorType:a instanceof Error?a.constructor.name:typeof a,errorMessage:a instanceof Error?a.message:String(a)}),a instanceof C?i(a):a instanceof Error?i(new C(a.message,"FETCH_ERROR")):i(new C("An unknown error occurred","UNKNOWN_ERROR"))}finally{c(!1),console.log("\uD83C\uDFC1 API Call Complete for ".concat(e))}},[e]),o=(0,r.useCallback)(async()=>{await d()},[d]);return(0,r.useEffect)(()=>{(null==s?void 0:s.autoFetch)!==!1&&d()},[d,...(null==s?void 0:s.dependencies)||[]]),{data:t,loading:n,error:l,refetch:o}}("/big-movers");if((0,r.useEffect)(()=>{console.log("\uD83C\uDFAF BigMovers Component State:",{data:e,loading:s,error:t,dataType:typeof e,dataKeys:e&&"object"==typeof e?Object.keys(e):"N/A"})},[e,s,t]),s)return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Big Movers"})]}),(0,a.jsx)("div",{className:"animate-pulse h-4 w-20 bg-secondary-200 rounded"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded-lg"})},e))})]});if(t){let e=(null==t?void 0:t.code)||"",s="504"===e?"Endpoint request timed out. Please try again later.":(null==e?void 0:e.startsWith("5"))?"Server error. Please try again shortly.":"Failed to load big movers data.";return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Big Movers"})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(k.Z,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:s})]})]})}let n=[...(null==e?void 0:e.positive_movers)||[],...(null==e?void 0:e.negative_movers)||[]].sort((e,s)=>Math.abs(s.score_change)-Math.abs(e.score_change)).slice(0,3);return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"Big Movers"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Last ",(null==e?void 0:e.period_days)||7," days"]})]})]}),0===n.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(p.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No significant rank changes yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later for performance updates"})]}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:"Top 3 Big Movers"}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsx)(A,{agent:e},e.agent_id))})]})})]})}var Z=t(2245),T=t(6654),E=t(5750);function R(e){var s,t,r,n,c,l,i,o,x,m,h,u,g;let{district:v,rank:f,isTopPerformer:b}=e,y=v.current_stats.active_agents/v.current_stats.total_agents*100;return(0,a.jsxs)("div",{className:"card transition-all duration-200 hover:shadow-lg ".concat(b?"ring-2 ring-primary-500 bg-gradient-to-br from-primary-50 to-white":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white ".concat(1===f?"bg-gradient-to-br from-yellow-400 to-yellow-600":2===f?"bg-gradient-to-br from-gray-300 to-gray-500":3===f?"bg-gradient-to-br from-amber-600 to-amber-800":"bg-gradient-to-br from-secondary-400 to-secondary-600"),children:[1===f&&(0,a.jsx)(d.Z,{className:"h-5 w-5"}),2===f&&(0,a.jsx)(j.Z,{className:"h-5 w-5"}),3===f&&(0,a.jsx)(Z.Z,{className:"h-5 w-5"}),f>3&&f]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-secondary-900",children:v.site}),(0,a.jsxs)("p",{className:"text-sm text-secondary-600",children:[v.agent_count," agents • Rank #",f]})]})]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:["Score: ",v.current_stats.total_score.toFixed(1)]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 text-primary-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-secondary-600",children:"Total Sales"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-secondary-900",children:v.current_stats.total_sales}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:[(null===(s=v.current_stats.avg_sales_per_agent)||void 0===s?void 0:s.toFixed(1))||"0.0"," avg per agent"]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-success-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-secondary-600",children:"Score"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:(null===(t=v.current_stats.total_score)||void 0===t?void 0:t.toFixed(1))||"0.0"}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:[(null===(r=v.current_stats.average_score)||void 0===r?void 0:r.toFixed(1))||"0.0"," avg per agent"]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-secondary-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-secondary-600",children:"Team Size"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-secondary-900",children:[v.current_stats.active_agents,"/",v.current_stats.total_agents]}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:[y.toFixed(0),"% active"]})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-secondary-600",children:"Revenue"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold text-secondary-900",children:["$",(null===(n=v.current_stats.total_revenue)||void 0===n?void 0:n.toFixed(0))||"0"]}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:["Avg Score: ",(null===(c=v.current_stats.average_score)||void 0===c?void 0:c.toFixed(1))||"0.0"]})]})]}),v.top_performers&&v.top_performers.length>0&&(0,a.jsx)("div",{className:"border-t border-secondary-200 pt-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-secondary-600 mb-1",children:"Top Performer"}),(0,a.jsx)("div",{className:"font-semibold text-secondary-900",children:v.top_performers[0].agent_name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-primary-600",children:v.top_performers[0].score.toFixed(1)}),(0,a.jsx)("div",{className:"text-xs text-secondary-500",children:v.top_performers[0].team})]})]})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-secondary-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary-600 mb-1",children:"SPCC"}),(0,a.jsx)("div",{className:"font-semibold text-secondary-900",children:((null===(l=v.current_stats)||void 0===l?void 0:l.avg_spcc)||0).toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary-600 mb-1",children:"Connect %"}),(0,a.jsxs)("div",{className:"font-semibold text-secondary-900",children:[(100*((null===(i=v.current_stats)||void 0===i?void 0:i.avg_connect_rate)||0)).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary-600 mb-1",children:"Efficiency"}),(0,a.jsx)("div",{className:"font-semibold ".concat((null===(o=v.performance_grade)||void 0===o?void 0:o.startsWith("A"))?"text-success-600":(null===(x=v.performance_grade)||void 0===x?void 0:x.startsWith("B"))?"text-primary-600":(null===(m=v.performance_grade)||void 0===m?void 0:m.startsWith("C"))?"text-warning-600":"text-danger-600"),children:(null===(h=v.performance_grade)||void 0===h?void 0:h.startsWith("A"))?"High":(null===(u=v.performance_grade)||void 0===u?void 0:u.startsWith("B"))?"Good":(null===(g=v.performance_grade)||void 0===g?void 0:g.startsWith("C"))?"Fair":"Low"})]})]})})]})}function F(){return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"card animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-secondary-200 rounded-lg"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-5 bg-secondary-200 rounded w-24"}),(0,a.jsx)("div",{className:"h-4 bg-secondary-200 rounded w-32"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-secondary-200 rounded w-20"}),(0,a.jsx)("div",{className:"h-6 bg-secondary-200 rounded w-16"}),(0,a.jsx)("div",{className:"h-3 bg-secondary-200 rounded w-24"})]},s))})]},s))})}function I(e){let{data:s,loading:t}=e;if(t)return(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6",children:(0,a.jsx)(F,{})});if(!s||!s.districts||0===s.districts.length)return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-secondary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"h-8 w-8 text-secondary-400"})}),(0,a.jsx)("div",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No District Data Available"}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"District performance data will appear here once agents start logging activity."})]});let r=[...s.districts].sort((e,s)=>s.current_stats.total_score-e.current_stats.total_score),n=r[0];return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-secondary-200 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-orange-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-secondary-900",children:"District Battle"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-secondary-900",children:s.districts.length}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"Active Districts"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:s.districts.reduce((e,s)=>e+s.current_stats.total_sales,0)}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"Total Sales"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-success-600",children:s.districts.reduce((e,s)=>e+s.current_stats.active_agents,0)}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"Active Agents"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:(null==n?void 0:n.site)||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-secondary-600",children:"Leading District"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map((e,s)=>(0,a.jsx)(R,{district:e,rank:s+1,isTopPerformer:0===s},e.site))})]})}var L=t(1298);function P(){var e,s,t,c,i;let[o,x]=(0,r.useState)("phoenix"),[m,u]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(new Date),{user:C}=(0,n.a)(),A=async e=>{try{let e=(null==C?void 0:C.name)||"",s="https://bgwvyurbv4.execute-api.us-east-1.amazonaws.com/prod",[t,a]=await Promise.all([fetch("".concat(s,"/leaderboard")),fetch("".concat(s,"/districts"))]);if(!t.ok)throw Error("Failed to fetch leaderboard");a.ok?f(await a.json()):f(null),j(null);let r=await t.json(),n=Array.isArray(r.leaders)?r.leaders:Array.isArray(r.agents)?r.agents.map(e=>({...e,weekly_sales:e.sales||0})):[],c={...r,leaders:n,total_agents:"number"==typeof r.total_agents?r.total_agents:n.length};if(u(c),e){let s=(c.leaders||[]).find(s=>String(s.name||s.agent_name||"").toLowerCase()===String(e).toLowerCase()),t="".concat(String(e).trim().toLowerCase().replace(/\s+/g,"_"),"_001"),a=(null==s?void 0:s.agent_id)||t,r=window.localStorage.getItem("access_token")||"",n="https://bgwvyurbv4.execute-api.us-east-1.amazonaws.com/prod";if(a&&n&&r){let e=await fetch("".concat(n,"/me/").concat(a),{headers:{Authorization:"Bearer ".concat(r),Accept:"application/json"}});e.ok&&j(await e.json())}}S(new Date)}catch(e){console.error("Error fetching data:",e)}finally{y(!1),w(!1)}};(0,r.useEffect)(()=>{A(o)},[o]),(0,r.useEffect)(()=>{C&&A(o)},[C]);let Z=()=>{w(!0),A(o)},E=e=>{x(e)};return b||!m?(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-50 to-primary-100",children:[(0,a.jsx)(g,{selectedSite:o,onSiteChange:E,lastUpdated:k,isRefreshing:N,onRefresh:Z}),(0,a.jsx)("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full animate-pulse"})}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading dashboard..."})]})})})]})}):(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-50 to-primary-100",children:[(0,a.jsx)(g,{selectedSite:o,onSiteChange:E,lastUpdated:k,isRefreshing:N,onRefresh:Z}),(0,a.jsx)("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-md border border-secondary-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-secondary-600 mb-2",children:"Your Rank"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-secondary-900",children:(()=>{var e;let s=null==v?void 0:v.agent_id,t=null===(e=((null==m?void 0:m.leaders)||[]).find(e=>e.agent_id===s))||void 0===e?void 0:e.rank;return t?"#".concat(t):"#--"})()}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:["of ",m.total_agents," agents"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-orange-50 border border-orange-300 flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-orange-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-md border border-secondary-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-secondary-600 mb-2",children:"Your Sales"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-secondary-900",children:(null==v?void 0:v.current_stats.sales_count)||0}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:[(null==v?void 0:v.current_stats.calls_handled)||0," calls"]}),(0,a.jsxs)("div",{className:"text-xs text-secondary-500",children:["$",Number((null==v?void 0:v.current_stats.revenue_generated)||0).toFixed(0)]})]}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-green-50 border border-green-300 flex items-center justify-center",children:(0,a.jsx)(T.Z,{className:"h-5 w-5 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-md border border-secondary-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-secondary-600 mb-2",children:"Your Bonuses"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-secondary-900 mb-1",children:["$",Number(((null==v?void 0:null===(e=v.bonus_info)||void 0===e?void 0:e.weekly_bonus)||0)+((null==v?void 0:null===(s=v.bonus_info)||void 0===s?void 0:s.monthly_bonus)||0)).toFixed(0)]}),(0,a.jsxs)("div",{className:"text-xs text-secondary-600",children:["$",(null==v?void 0:null===(t=v.bonus_info)||void 0===t?void 0:t.weekly_bonus)||0," weekly + $",(null==v?void 0:null===(c=v.bonus_info)||void 0===c?void 0:c.monthly_bonus)||0," monthly"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)("svg",{className:"h-4 w-4 text-success-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 17l6-6 4 4 7-7"})}),(0,a.jsx)("span",{className:"text-xs text-success-600 font-medium",children:(null==v?void 0:null===(i=v.bonus_info)||void 0===i?void 0:i.next_bonus_tier)?"Next bonus tier available":"No bonus tier available"})]})]}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-yellow-50 border border-yellow-300 flex items-center justify-center",children:(0,a.jsx)(L.Z,{className:"h-5 w-5 text-yellow-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-md border border-secondary-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-secondary-600 mb-2",children:"Your Performance"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-secondary-900",children:Number((null==v?void 0:v.current_stats.customer_satisfaction)||0).toFixed(1)}),(0,a.jsx)("div",{className:"text-xs text-secondary-500",children:"Customer Rating"})]}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gray-100 border border-gray-300 flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-600"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"xl:col-span-2",children:(0,a.jsx)(_,{agents:m.leaders.slice(0,20),loading:b,error:null,updatedAt:k,isRefreshing:N})}),(0,a.jsx)("div",{children:(0,a.jsx)(D,{})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(I,{data:p,loading:b})})]})})]})})}}},function(e){e.O(0,[378,465,971,938,744],function(){return e(e.s=2904)}),_N_E=e.O()}]);